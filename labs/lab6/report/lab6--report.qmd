---
## Author
author:
  name: Кхари Жекка Кализая Арсе
  email: 1032234412@pfur.ru
  affiliation:
    - name: Российский университет дружбы народов
      country: Российская Федерация
      postal-code: 117198
      city: Москва
      address: ул. Миклухо-Маклая, д. 6

## Title
title: "отчёт по лабораторной работе №6"
subtitle: "Адресация IPv4 и IPv6. Двойной стек"
license: "CC BY"
---

# Цель работы

Изучение принципов распределения и настройки адресного пространства на устройствах сети

# Задание


## Разбиение IPv4-сети на подсети
1. Задана IPv4-сеть 172.16.20.0/24. Для заданной сети определите префикс, маску, broadcast-адрес, число возможных подсетей, диапазон адресов узлов.
Разбейте сеть на 3 подсети с максимально возможным числом адресов узлов
126, 62, 62 соответственно.
2. Задана сеть 10.10.1.64/26. Для заданной сети определите префикс, маску,
broadcast-адрес, число возможных подсетей, диапазон адресов узлов. Выделите в этой сети подсеть на 30 узлов. Запишите характеристики для выделенной
подсети.
3. Задана сеть 10.10.1.0/26. Для этой сети определите префикс, маску, broadcastадрес, число возможных подсетей, диапазон адресов узлов. Выделите в этой
сети подсеть на 14 узлов. Запишите характеристики для выделенной подсети.

## Разбиение IPv6-сети на подсети
1. Задана сеть 2001:db8:c0de::/48. Охарактеризуйте адрес, определите маску,
префикс, диапазон адресов для узлов сети (краевые значения). Разбейте сеть
на 2 подсети двумя способами — с использованием идентификатора подсети
и с использованием идентификатора интерфейса. Поясните предложенные
вами варианты разбиения.
2. Задана сеть 2a02:6b8::/64. Охарактеризуйте адрес, определите маску, префикс, диапазон адресов для узлов сети (краевые значения). Разбейте сеть на
2 подсети двумя способами — с использованием идентификатора подсети
и с использованием идентификатора интерфейса. Поясните предложенные
вами варианты разбиения.


# Выполнение лабораторной работы

Сначала я запустил ВМ и GNS3, потом я создал новый проект и назвал его task6

![name](image/01.png){#fig-001 width=70%}


Потом я начал создать топологию и соединить все

![name](image/02.png){#fig-002 width=70%}

![name](image/03.png){#fig-003 width=70%}

![name](image/04.png){#fig-004 width=70%}

![name](image/05.png){#fig-005 width=70%}

![name](image/06.png){#fig-006 width=70%}


и запустил все машины

Дальше я открыл терминал первоого компьютера и настроил ip адрес

    `ip 172.16.20.10/25 172.16.20.1
     save
    `

![name](image/07.png){#fig-007 width=70%}

Потом повторил настройку со вторым компьютером

    `ip 172.16.20.138/25 172.16.20.129
    save`

![name](image/08.png){#fig-008 width=70%}


и с сервером также я настроил ip адрес

    `ip 64.100.1.10/24 64.100.1.1
    save`

![name](image/09.png){#fig-009 width=70%}


Потом я начал настройт компьютеры 3, 4 и сервер но используя проток ipv6 

    `компьютер 3:
      ip 2001:db8:c0de:12::a/64
      save
      show ipv6
    компьютер 4:
      ip 2001:db8:c0de:13::a/64
      save
      show ipv6
    сервер:
      ip 2001:db8:c0de:11:a/64
      save
      show ipv6`

![name](image/10.png){#fig-010 width=70%}

![name](image/11.png){#fig-011 width=70%}

![name](image/12.png){#fig-012 width=70%}


Потом я включил wiresharк чтобы ловить пакеты

![name](image/13.png){#fig-013 width=70%}

![name](image/14.png){#fig-014 width=70%}


потом я начал настройт FRR 

    `frr# configure terminal
    frr(config)# hostname msk-qscalizaya-gw-01
    msk-qscalizaya-gw-01(config)# exit
    msk-qscalizaya-gw-01# write memory
    msk-qscalizaya-gw-01# configure terminal
    msk-qscalizaya-gw-01(config)# interface eth0
    msk-qscalizaya-gw-01(config-if)# ip address 172.16.20.1/25
    msk-qscalizaya-gw-01(config-if)# no shutdown
    msk-qscalizaya-gw-01(config-if)# exit
    msk-qscalizaya-gw-01(config)# interface eth1
    msk-qscalizaya-gw-01(config-if)# ip address 172.16.20.129/25
    msk-qscalizaya-gw-01(config-if)# no shutdown
    msk-qscalizaya-gw-01(config-if)# exit
    msk-qscalizaya-gw-01(config)# interface eth2
    msk-qscalizaya-gw-01(config-if)# ip address 64.100.1.1/24
    msk-qscalizaya-gw-01(config-if)# no shutdown
    msk-qscalizaya-gw-01(config-if)# exit
    msk-qscalizaya-gw-01(config)# exit
    msk-qscalizaya-gw-01# write memory`


![name](image/15.png){#fig-015 width=70%}


Потом я проверил что компьютеры могли соединиться 

    `компьютер 1:
      ping 172.16.20.138

    компьютер 2:
      ping 172.16.20.10/25`


![name](image/16.png){#fig-016 width=70%}


Дальше я также проверил соединение с сервера

    `ping 172.16.20.138
    ping 172.16.20.10/25`

![name](image/17.png){#fig-017 width=70%}


Также в wireshark я смог смотреть все пакеты отправлены с компьютеров и сервера и какие протоколы они использовали 


![name](image/18.png){#fig-018 width=70%}

Потом я начал настроить vyos, сначала я установливал image ОС

    `install image`

![name](image/19.png){#fig-019 width=70%}

![name](image/20.png){#fig-020 width=70%}

Потом я настройл его

    `configure
    set system host-name msk-qsaclizaya-gw-02
    compare
    commit
    save
    exit
    reboot
    -----
    vyos@msk-qscalizaya-gw-02:~$ configure
    vyos@msk-qscalizaya-gw-02# set interfaces ethernet eth0 address 2001:db8:c0de:12::1/64
    vyos@msk-qscalizaya-gw-02# set service router-advert interface eth0 prefix 2001:db8:c0de:12::/64
    vyos@msk-qscalizaya-gw-02# set interfaces ethernet eth1 address 2001:db8:c0de:13::1/64
    vyos@msk-qscalizaya-gw-02# set service router-advert interface eth1 prefix 2001:db8:c0de:13::/64
    vyos@msk-qscalizaya-gw-02# set interfaces ethernet eth2 address 2001:db8:c0de:11::1/64
    vyos@msk-qscalizaya-gw-02# set service router-advert interface eth2 prefix 2001:db8:c0de:11::/64
    vyos@msk-qscalizaya-gw-02# compare
    vyos@msk-qscalizaya-gw-02# commit
    vyos@msk-qscalizaya-gw-02# save
    vyos@msk-qscalizaya-gw-02# show interfaces`

![name](image/21.png){#fig-021 width=70%}

![name](image/22.png){#fig-022 width=70%}

![name](image/23.png){#fig-023 width=70%}

Потом я проверил соединение компьютеров и сервера

    `ping 2001:db8:c0de:12::a
    ping 2001:db8:c0de::a` 

![name](image/24.png){#fig-024 width=70%}

Потом я проверил что компьютеры 1 и 2 не могли подключаться к компьютерам 3 и 4

![name](image/25.png){#fig-025 width=70%}


Также я смотрел пакеты в wireshark

![name](image/26.png){#fig-026 width=70%}

Потом я создал новую топологию используя два компьютера и только vyos

![name](image/27.png){#fig-027 width=70%}


Для того я использовал следующий данные:


| устройство  | тип         | настройка |
|-------------|-------------|-----------|
| pc1         | ipv4        | 172.16.20.20/25 172.16.20.10 |
| pc1         | ipv6        |2001:db8:c0de:13::a/64|
| pc2         | ipv4        | 172.16.20.150/25 172.16.20.138 |
| pc2         | ipv6        | 2001:db8:c0de:13::1 |
| vyos        | eth0-ipv4   | 172.16.20.10/25 |
| vyos        | eth1-ipv4   | 172.16.20.138/25|
| vyos        | eth0-ipv6   | 2001:db8:c0de:12::1/64 |
| vyos        | eth0-prefix | 2001:db8:c0de:12::/64 |
| vyos        | eth1-ipv6   | 2001:db8:c0de:13::1/64 |
| vyos        | eth1-ipv6   | 2001:db8:c0de:13::/64 |


и я начал настройку установляя image ОС

    `install image`

![name](image/28.png){#fig-028 width=70%}


Потом я устновил адресы в vyos

    `configure
    set interfaces ethernet eth0 address 2001:db8:c0de:12::1/64
    set service router-advert interface eth0 prefix 2001:db8:c0de:12::/64
    set interfaces ethernet eth1 address 2001:db8:c0de:13::1/64
    set service router-advert interface eth1 prefix 2001:db8:c0de:13::/64
    compare
    commit
    save
    `

![name](image/29.png){#fig-029 width=70%}

![name](image/30.png){#fig-030 width=70%}

![name](image/31.png){#fig-031 width=70%}

![name](image/34.png){#fig-034 width=70%}

Потом я настройл pc1 и pc2 и попровоал соединение

    ping 2001:db8:c0de:12::1/64
    ping 2001:db8:c0de:13::1/64


![name](image/32.png){#fig-032 width=70%}

![name](image/33.png){#fig-033 width=70%}


Потом я добавил адресы ipv4 компьютерам


    компьютер 1:
    ip 172.16.20.20/25 172.16.20.10

    компьютер 2:
    ip 172.16.20.150/25 172.16.20.138


![name](image/35.png){#fig-035 width=70%}

![name](image/36.png){#fig-036 width=70%}


Потом я еще раз попробовал соедиение c протоколом ipv4

    ping 172.16.20.150/25 172.16.20.138
    ping 172.16.20.20/25 172.16.20.10


![name](image/37.png){#fig-07 width=70%}




# Выводы

в этой лабораторной работе я смог смотреть работа топологий с разными протоколами, также как настроить сеть и адресы для соединения между узлами

# Список литературы{.unnumbered}

::: {#refs}
:::
